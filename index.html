<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>1024浮动瀑布流</title>
<style>
*{padding:0;margin:0;overflow:auto;}
#box{width:1200px;margin:0 auto;}
ul{list-style-type:none;margin-right:10px;float:left;width:380px;}
ul li{margin-bottom:20px;}
ul li img(width:380px;)
</style>
</head>
<body>
	<div id="box">
		<ul></ul>
	    <ul></ul>
		<ul></ul>
	</div>
	<script>
	/*
	1、外部容器浮动
	2、创建需要的元素
	3、判断哪一个容器为最小容器
	4、将内容插入到最小容器内
	
	*/
	function checkHeight(oUl){
	    //height index 初始化
	    var height=10000000;
	    var index= 0;
		for(var a=0;a<oUl.length;a++){
			if(oUl[a].offsetHeight<height){
				height = oUl[a].offsetHeight;
			    index = a;
			}
		}
		return index;
	}
	
	window.onload=function(){
		var oBox=document.getElementById("box");
		var oUl=oBox.getElementsByTagName("ul");
		var vH=document.documentElement.clientHeight;
		
		window.onscroll=function(){
		    //获得滚动条的高度
			var st=document.documentElement.scrollTop || document.body.scrollTop;
			//滚动条的高度+浏览器的高度=内容区域的高度
			//st+vH=document.body.scrollHeight
			if(st+vH >= document.body.scrollHeight){
			//加载新内容
				createElement();
			}
		}
		//第一次调用
		createElement();
		//封装函数
		function createElement(){
		for(var a=1;a<19;a++){
		     var oImg=document.createElement("img");
		     oImg.src="images/0"+a+".jpg";
			 var oLi=document.createElement("li");
			 oLi.appendChild(oImg);
			 //获得最小ul的索引值
			 var min_index=checkHeight(oUl);
			 oUl[min_index].appendChild(oLi);
		}
	   }
	}
	</script>
</body>
</html>
